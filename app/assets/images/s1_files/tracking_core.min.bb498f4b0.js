function TrackingStore(){this._section="",this._profileId="",this._subscriptions=[],this._subpage="",this._starttime="",this._endtime="",Object.defineProperties(this,{section:{get:function(){return this._section}},profileId:{get:function(){return this._profileId.concat("")||""}},subpage:{get:function(){return this._subpage.concat("")||""}},starttime:{get:function(){return this._starttime}},endtime:{get:function(){return this._endtime}}})}function noop(){}window.trackingStore||(window.trackingStore=new TrackingStore),TrackingStore.prototype.setProfileId=function(a){return this._profileId=a,this.emit(),this},TrackingStore.prototype.removeProfileId=function(){return this._profileId="",this.emit(),this},TrackingStore.prototype.setStarttime=function(a){return this._starttime=a,this.emit(),this},TrackingStore.prototype.removeStarttime=function(){return this._starttime="",this.emit(),this},TrackingStore.prototype.setEndtime=function(a){return this._endtime=a,this.emit(),this},TrackingStore.prototype.removeEndtime=function(){return this._endtime="",this.emit(),this},TrackingStore.prototype.setSection=function(a){return this._section=a,this.emit(),this},TrackingStore.prototype.removeSection=function(){return this._section="",this.emit(),this},TrackingStore.prototype.setSubpage=function(a){return this._subpage=a,this.emit(),this},TrackingStore.prototype.removeSubpage=function(){return this._subpage="",this.emit(),this},TrackingStore.prototype.subscribe=function(a){var b=this._subscriptions.push(a);return function(){this._subscriptions.filter(function(a,c){return c!=b})}},TrackingStore.prototype.emit=function(){var a=this;this._subscriptions.forEach(function(b){b(a)})},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(a,b){"use strict";if(null==a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1;d<arguments.length;d++){var e=arguments[d];if(null!=e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(c[f]=e[f])}return c},writable:!0,configurable:!0});var defTrackingObj,intersectionObserver,intersectionObserverBiggerSections,site_url="https://www.99acres.com/",visited=new Set,setForLoad=new Set,visitedScroll=new Set,visitedObserver=new Set,stackStoringLayerName=[],_clickStream={doClickStreamTracking:function(a){var b="trackingData[]="+encodeURIComponent(JSON.stringify(a));_clickStream.post("/do/clickStreamTracking/ClickStream/trackData",b)},_trackerId:0,getHttp:function(){var a=null;try{a=new XMLHttpRequest}catch(a){console.error("XMLHttpRequest object not found")}return a},post:function(a,b){var c=this.getHttp();if(c){c.open("POST",a,!0);var d=b+"&is_ajax=1";c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.send(d)}},trackingConstructor:function(a){if(this.action={page:a.page||"",event:a.event||"",stage:a.stage||"FINAL",referrer_section:a.referrer_section||"",source:a.source||""},a.section&&(this.action.section=a.section),a.trigger&&(this.action.trigger=a.trigger),a.workflow&&(this.action.workflow=a.workflow),a.ui_attributes&&Object.getOwnPropertyNames(a.ui_attributes).length){var b=JSON.parse(a.ui_attributes);b.ui_attributes&&(this.ui_attributes=b.ui_attributes)}a.event_info&&(this.event_info=a.event_info),objSdk={custom_object:{isSDK:"true"}},this.custom_object=Object.assign({},objSdk.custom_object),a.customData&&(a.customData.search&&Object.getOwnPropertyNames(a.customData.search).length&&(this.search=a.customData.search),a.customData.payload&&Object.getOwnPropertyNames(a.customData.payload).length&&(this.payload=a.customData.payload),a.customData.custom_object&&Object.getOwnPropertyNames(a.customData.custom_object).length&&(this.custom_object=Object.assign({},a.customData.custom_object,objSdk.custom_object)));var c=tracker.getMessageId();c&&(this.message_id=c),a.platform&&(this.platform=a.platform),this.date_time=tracker.getDateTime(),document.referrer?this.referrer=document.referrer:this.referrer="NOT_EXIST",window.location.href?this.current_url=window.location.href:this.current_url="NOT_EXIST"},_track:function(a){if(this._batcher){var b=this.doClickStreamTracking.bind(this);this._batcher.batch(a,b)}else try{this.doClickStreamTracking(a,!0)}catch(a){console.error("clickStream object not found")}},postMessageToWorker:function(a){this._batcher&&a&&a.event&&"beforeunload"==a.event&&this._batcher.sendMessage(a)},_batcher:null,initializeBatching:function(a,b){function c(c,d){(c||d)&&(this._worker=new Worker("/js/batch_tracking.min.4e8705da4.js"),this._worker.postMessage({batchSize:a,batchTimeout:b})),this._blackList=new Set(["PAGE_VIEW"]),this._blackList.add("SECTION_OUT"),this._blackList.add("SEARCH")}return a=a||5,b=b||3e4,c.prototype.batch=function(a,b){return this._worker&&!this._blackList.has(a.action.event)?this._worker.postMessage(a):b(a,!0),this},c.prototype.sendMessage=function(a){return this._worker&&this._worker.postMessage(a),this},c.prototype.blackList=function(a){this._blackList.add(a)},c.prototype.removeFromBlacklist=function(a){this._blackList.delete(a)},this._batcher=new c(a,b),this.blacklistBatching=clickStream._batcher.blackList,this.removeFromBatchingBlacklist=clickStream._batcher.removeFromBlacklist,this},blacklistBatching:noop,removeFromBatchingBlacklist:noop},clickStream=Object.assign({},clickStream,_clickStream);!function(){clickStream.listeners=function(){this.callFunctionsOnBeforeLoad=function(){tracker.triggerPageViewLoad()},this.callFunctionsOnLoad=function(){tracker.setSessionSource(),tracker.setPageStartTime(),tracker.triggerPageView(),tracker.addIntersectionObservableTargets(),tracker.addMutationObservableTargets(),tracker.triggerSectionLoaded(),tracker.addClickListenersToAllElements()},this.callFunctionsOnFocus=function(){tracker.setSessionSource()},this.callFunctionsOnSearch=function(){tracker.trackSearch()},this.callFunctionsOnBeforeUnload=function(){tracker.createTrackDataCallForSectionOutEvent(),tracker.flushBatchBuffer()},this.getMessageId=function(){var a,b=document.getElementsByTagName("BODY")[0];return b&&b.getAttribute("data-messageid")&&""!=b.getAttribute("data-messageid")&&(a=document.getElementsByTagName("BODY")[0].getAttribute("data-messageid")),a},this.getDateTime=function(){return(new Date).getTime()/1e3},this.getPageName=function(){var a="";if(document.getElementsByTagName("BODY")[0].getAttribute("data-label"))var a=document.getElementsByTagName("BODY")[0].getAttribute("data-label");return a},this.getReferrerSection=function(){var a="";return document.getElementsByTagName("BODY")[0].getAttribute("data-referrer_section")&&(a=document.getElementsByTagName("BODY")[0].getAttribute("data-referrer_section")),a},this.getPlatformValue=function(){var a="";return document.getElementsByTagName("BODY")[0]&&document.getElementsByTagName("BODY")[0].getAttribute("data-platform")&&(a=document.getElementsByTagName("BODY")[0].getAttribute("data-platform")),a},this.getUiAttributes=function(a){for(var b={};;){if(a.getAttribute("data-label")&&("true"==a.getAttribute("topmost")||"BODY"==a.nodeName)){a.getAttribute("data-ui_attributes")&&(b=a.getAttribute("data-ui_attributes"));break}a=a.parentNode}return b},this.createCustomInfo=function(a){var b={},c={},d={};document.getElementsByTagName("BODY")[0]&&(b=document.getElementsByTagName("BODY")[0].getAttribute("data-custominfo")?JSON.parse(document.getElementsByTagName("BODY")[0].getAttribute("data-custominfo")):{}),document.getElementById("srpClickstreamObject")&&(c=document.getElementById("srpClickstreamObject").value?JSON.parse(document.getElementById("srpClickstreamObject").value):{}),void 0!=a&&(d=a.getAttribute("data-custominfo")?JSON.parse(a.getAttribute("data-custominfo")):{});var e=Object.assign({},b.custom_object,c.custom_object,d.custom_object);if(c.payload&&d.payload)if(c.payload.search_results&&d.payload.search_results)var f=Object.assign({search_results:Object.assign({},c.payload.search_results,d.payload.search_results)});else if(b.payload)if(b.payload.property&&d.payload.property)var f=Object.assign({property:Object.assign({},b.payload.property,d.payload.property)});else if(b.payload.project&&d.payload.project)var f=Object.assign({project:Object.assign({},b.payload.project,d.payload.project)});else if(b.payload.user&&d.payload.user)var f=Object.assign({user:Object.assign({},b.payload.user,d.payload.user)});else var f=Object.assign({},b.payload,c.payload,d.payload);else var f=Object.assign({},b.payload,c.payload,d.payload);else if(b.payload&&b.payload.recommendation&&d.payload&&d.payload.recommendation)var f=Object.assign({recommendation:Object.assign({},b.payload.recommendation,d.payload.recommendation)});else var f=Object.assign({},b.payload,c.payload,d.payload);var g=Object.assign({},c.search);return{custom_object:e,payload:f,search:g}},this.triggerPageView=function(){console.log("Trigger page view final time = ",Date.now());var a=tracker.getReferrerSection(),b=tracker.getPageName(),c=tracker.createCustomInfo(),d=tracker.getPlatformValue();if("SRP"==b||"GROUP_SRP"==b){var e=new clickStream.trackingConstructor(Object.assign({page:b,event:"SEARCH",stage:"FINAL",referrer_section:a,customData:c,platform:d}));return clickStream._track(e),this}if(b&&""!=b){var e=new clickStream.trackingConstructor(Object.assign({page:b,event:"PAGE_VIEW",stage:"FINAL",referrer_section:a,customData:c,platform:d}));return clickStream._track(e),this}},this.triggerPageViewLoad=function(){console.log("Trigger page view load time = ",Date.now());var a=tracker.getReferrerSection(),b=tracker.getPageName(),c=tracker.createCustomInfo(),d=tracker.getPlatformValue();if("SRP"==b||"GROUP_SRP"==b){var e=new clickStream.trackingConstructor(Object.assign({page:b,event:"SEARCH",stage:"LOAD",referrer_section:a,customData:c,platform:d}));return clickStream._track(e),this}if(b&&""!=b){var e=new clickStream.trackingConstructor(Object.assign({page:b,event:"PAGE_VIEW",stage:"LOAD",referrer_section:a,customData:c,platform:d}));return clickStream._track(e),this}},this.setPageStartTime=function(){var a=(new Date).getTime();window.trackingStore&&window.trackingStore.setStarttime(a)},this.triggerSectionLoaded=function(){var a=document.querySelectorAll("[data-label]");setForLoad.clear();for(var b=0;b<a.length;b++)a[b]&&a[b].getAttribute("topmost")&&(setForLoad.has(a[b].getAttribute("data-label"))||(setForLoad.add(a[b].getAttribute("data-label")),tracker.setSectionLoad(a[b])))},this.mutationCallBack=function(a,b){"value"==a[0].attributeName&&tracker.createCustomEvent("search","search")},this.mutationCallBackForDynamicElements=function(a,b){for(var c=document.querySelectorAll("[data-label]"),d=0;d<c.length;d++)c[d].getAttribute("data-layer")&&c[d].getAttribute("topmost")&&"true"==c[d].getAttribute("data-layer")&&(visited&&!visited.has(c[d])&&(visited.add(c[d]),tracker.setSectionLoad(c[d]),c[d]&&c[d].addEventListener("click",tracker.triggerSectionClick.bind(tracker,c[d]))),intersectionObserver.unobserve(c[d]),intersectionObserver.observe(c[d])),visited&&!visited.has(c[d])&&(visited.add(c[d]),c[d]&&c[d].getAttribute("topmost")&&!c[d].getAttribute("data-layer")&&(tracker.setSectionLoad(c[d]),c[d].getBoundingClientRect().height<=visualViewport.height?(intersectionObserver.unobserve(c[d]),intersectionObserver.observe(c[d])):(intersectionObserverBiggerSections.unobserve(c[d]),intersectionObserverBiggerSections.observe(c[d]))),c[d]&&c[d].addEventListener("click",tracker.triggerSectionClick.bind(tracker,c[d])))},this.trackSearch=function(){var a="",b=tracker.getPageName();window.TrackingStore&&window.trackingStore.section&&(a=window.trackingStore.section);var c=tracker.getReferrerSection(),d="";d=tracker.createCustomInfo();var e=tracker.getPlatformValue();if(b&&""!=b){var f=new clickStream.trackingConstructor(Object.assign({},{page:b,event:"SEARCH",section:a,stage:"FINAL",referrer_section:c,customData:d,platform:e}));return clickStream._track(f),this}},this.createCustomEvent=function(a,b){var c;if(document.createEvent){if(c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0),c.eventName=a,document.getElementById("srpClickstreamObject"))var d=document.getElementById("srpClickstreamObject");d&&d.dispatchEvent(c)}else{if(c=document.createEventObject(),c.eventName=a,c.eventType=b,document.getElementById("srpClickstreamObject"))var d=document.getElementById("srpClickstreamObject");d&&d.fireEvent("on"+c.eventType,c)}},this.setSectionLoad=function(a){var b="",c=tracker.getPageName(),d=0;"true"==a.getAttribute("data-layer")&&(d=1);var e="",f="";d&&(a.getAttribute("data-workflow")&&(f=a.getAttribute("data-workflow")),window.TrackingStore&&window.trackingStore.section&&(e=window.trackingStore.section)),a&&a.getAttribute("data-label")&&(b=a.getAttribute("data-label"));var g=tracker.getReferrerSection(),h="";h=tracker.createCustomInfo(a);var i=tracker.getPlatformValue(),j=tracker.getUiAttributes(a);if(c&&""!=c&&b){var k=new clickStream.trackingConstructor(Object.assign({},{page:c,event:"SECTION_VIEW",section:b,stage:"LOAD",trigger:e,workflow:f,referrer_section:g,customData:h,platform:i,ui_attributes:j}));return clickStream._track(k),this}},this.addIntersectionObservableTargets=function(){for(var a=document.querySelectorAll("[data-label]"),b=0;b<a.length;b++)a[b].getAttribute("topmost")&&!a[b].getAttribute("data-layer")&&visitedObserver&&!visitedObserver.has(a[b].getAttribute("data-label"))&&(visitedObserver.add(a[b].getAttribute("data-label")),a[b].getBoundingClientRect().height<=visualViewport.height?(intersectionObserver.unobserve(a[b]),intersectionObserver.observe(a[b])):(intersectionObserverBiggerSections.unobserve(a[b]),intersectionObserverBiggerSections.observe(a[b])))},this.addMutationObservableTargets=function(){var a=document.getElementsByTagName("BODY")[0];if(a){var b={childList:!0,subtree:!0,attributeFilter:["data-label"]};mutationObserverForDynamicElements.observe(a,b)}var c=document.getElementById("srpClickstreamObject");if(c){var d={attributes:!0};mutationObserver.observe(c,d)}},this.checkLayerOrNot=function(){for(var a=1,b=0,c=event.target,d=event.currentTarget,e=c;e&&a<=15&&e.nodeName&&"BODY"!=e.nodeName;){if(e.getAttribute("data-label")){if(e.getAttribute("data-label")!=d.getAttribute("data-label"))return b;for(;;){if(e&&e.getAttribute("topmost"))return e&&e.getAttribute("data-layer")&&"true"==e.getAttribute("data-layer")?b=1:b;if(!e||!e.parentNode||"BODY"==e.parentNode.nodeName)return b;e=e.parentNode}}if(!e.parentNode)break;e=e.parentNode,a++}return b},this.addClickListenersToAllElements=function(){for(var a=document.querySelectorAll("[data-label]"),b=0;b<a.length;b++)visited&&!visited.has(a[b])&&(visited.add(a[b]),a[b]&&a[b].addEventListener("click",tracker.triggerSectionClick.bind(tracker,a[b])))},this.triggerSectionClick=function(a){var b=tracker.getReferrerSection(),c="",d=tracker.getPageName();c=tracker.setSectionName();var e="";e=event.target.getAttribute("data-custominfo")?tracker.createCustomInfo(event.target):a&&a.getAttribute("data-custominfo")?tracker.createCustomInfo(a):tracker.createCustomInfo();var f=tracker.getPlatformValue(),g=tracker.getUiAttributes(a),h=0;h=tracker.checkLayerOrNot();var i="",j="";if(h){for(;a;){if(a.getAttribute("topmost")){a.getAttribute("data-layer")&&a.getAttribute("data-workflow")&&(j=a.getAttribute("data-workflow"));break}a.parentNode&&"BODY"!=a.parentNode.nodeName&&(a=a.parentNode)}window.TrackingStore&&window.trackingStore.section&&(i=window.trackingStore.section),c.match(/CLOSE/g)&&(stackStoringLayerName=[])}if(d&&""!=d&&c){var k=new clickStream.trackingConstructor(Object.assign({},{page:d,event:"CLICK",section:c,stage:"FINAL",trigger:i,workflow:j,referrer_section:b,customData:e,platform:f,ui_attributes:g}));return clickStream._track(k),this}},this.makeSectionName=function(){var a=1,b="",c=0;c=tracker.checkLayerOrNot();for(var d=event.target;d&&a<=15&&d.nodeName&&"BODY"!=d.nodeName;){if(d.getAttribute("data-label")&&(b=""!=b?d.getAttribute("data-label")+"."+b:d.getAttribute("data-label")),d.getAttribute("topmost")){if(d&&!c){window.trackingStore.setSection(b);break}if(d&&c)break}if(!d.parentNode)break;d=d.parentNode,a++}return b},this.setSectionName=function(){for(var a=1,b="",c=event.currentTarget,d=event.target;d&&a<=15&&d.nodeName&&"BODY"!=d.nodeName;){if(d.getAttribute("data-label"))return d.getAttribute("data-label")==c.getAttribute("data-label")?this.makeSectionName():b;if(!d.parentNode)break;d=d.parentNode,a++}return b},this.callingLayerSectionView=function(a){var b="",c=tracker.getPageName(),d="",e="",f="",g=tracker.getPlatformValue();a.getAttribute("data-workflow")&&(e=a.getAttribute("data-workflow")),window.TrackingStore&&window.trackingStore.section&&(f=window.trackingStore.section),a.getAttribute("data-label")&&(b=a.getAttribute("data-label")),d=tracker.createCustomInfo(a);var h=tracker.getReferrerSection();if(c&&""!=c&&b){var i=new clickStream.trackingConstructor(Object.assign({},{page:c,event:"SECTION_VIEW",stage:"FINAL",section:b,trigger:f,workflow:e,referrer_section:h,customData:d,platform:g}));return clickStream._track(i),this}},this.handlingLayerSectionViewTracking=function(a){var b=a.getAttribute("data-label");if(stackStoringLayerName.length>0){stackStoringLayerName.pop()!=b&&tracker.callingLayerSectionView(a)}else tracker.callingLayerSectionView(a);stackStoringLayerName.push(b)},this.intersectionCallbackBiggerSections=function(a){var b=tracker.getPlatformValue(),c=tracker.getPageName();a.forEach(function(a){var d=(a.target,Math.floor(100*a.intersectionRatio)),e=Math.floor(.75*visualViewport.height);if(a.intersectionRect.height>e&&"true"==a.target.getAttribute("topmost")){console.log("bigger section name = "+a.target.getAttribute("data-label")),console.log("interection ratio = "+d+"  entry.intersectionRect.height = "+a.intersectionRect.height);var f="",g="";a.target.getAttribute("data-label")&&(f=a.target.getAttribute("data-label")),g=tracker.createCustomInfo(a.target);var h=tracker.getReferrerSection();if(!visitedScroll.has(a.target)&&(visitedScroll.add(a.target),c&&""!=c&&f)){var i=new clickStream.trackingConstructor(Object.assign({},{page:c,event:"SECTION_VIEW",stage:"FINAL",section:f,referrer_section:h,customData:g,platform:b}));return clickStream._track(i),this}}})},this.intersectionCallback=function(a){var b=tracker.getPlatformValue(),c=tracker.getPageName();a.forEach(function(a){a.target;if(Math.floor(100*a.intersectionRatio)>=75&&"true"==a.target.getAttribute("topmost")){if("true"==a.target.getAttribute("data-layer"))return void tracker.handlingLayerSectionViewTracking(a.target);var d="",e="";a.target.getAttribute("data-label")&&(d=a.target.getAttribute("data-label")),e=tracker.createCustomInfo(a.target);var f=tracker.getReferrerSection(),g=tracker.getUiAttributes(a.target);if(!visitedScroll.has(a.target)&&(visitedScroll.add(a.target),c&&""!=c&&d)){var h=new clickStream.trackingConstructor(Object.assign({},{page:c,event:"SECTION_VIEW",stage:"FINAL",section:d,referrer_section:f,customData:e,platform:b,ui_attributes:g}));return clickStream._track(h),this}}})},this.setSessionSource=function(){for(var a,b=document.referrer,c=document.cookie,d=c.split(";"),e="session_source",f=1,g=0;g<d.length;g++)if(d[g].match(e)){f=0;var h=d[g].split("=");a=h[1]}if(f)""!=b&&!b||b.match(site_url)?document.cookie=b?"session_source = "+b+";domain=www.99acres.com ; path=/":"session_source = NOT_EXIST; domain=www.99acres.com; path=/":document.cookie=""==b?"session_source = DIRECT ;domain=www.99acres.com; path=/":"session_source = "+b+";domain=www.99acres.com; path=/";else{if(""==b&&"DIRECT"==a)return;if(!b&&"NOT_EXIST"==a)return;if(b==a)return;b==a||b.match(site_url)||(document.cookie="session_source = "+b+";domain=www.99acres.com ; path=/")}},this.createTrackDataCallForSectionOutEvent=function(){var a=(new Date).getTime(),b=tracker.getPageName();if(window.trackingStore&&window.trackingStore.setEndtime(a),b&&""!=b&&window.trackingStore&&window.trackingStore.starttime&&window.trackingStore.endtime){var c=Object.assign({},{page:b,event:"SECTION_OUT",event_info:{start_time:window.trackingStore.starttime,end_time:window.trackingStore.endtime,id:"exist"}}),d=new clickStream.trackingConstructor(Object.assign({},c));return clickStream._track(d),this}},this.flushBatchBuffer=function(){var a={event:"beforeunload"};clickStream.postMessageToWorker(a)}}}();var observerOptions={root:null,rootMargin:"0px",threshold:[.75]},observerOptionsBiggerSections={root:null,rootMargin:"0px",threshold:[.1,.2,.25,.3,.4,.5,.6,.7,.75]},tracker=new clickStream.listeners;intersectionObserver=new IntersectionObserver(tracker.intersectionCallback,observerOptions),intersectionObserverBiggerSections=new IntersectionObserver(tracker.intersectionCallbackBiggerSections,observerOptionsBiggerSections);var mutationObserver=new MutationObserver(tracker.mutationCallBack),mutationObserverForDynamicElements=new MutationObserver(tracker.mutationCallBackForDynamicElements);clickStream.initializeBatching(5,3e4),window.addEventListener("load",tracker.callFunctionsOnLoad),document.addEventListener("DOMContentLoaded",tracker.callFunctionsOnBeforeLoad),window.addEventListener("focus",tracker.callFunctionsOnFocus),window.addEventListener("search",tracker.callFunctionsOnSearch),window.addEventListener("beforeunload",tracker.callFunctionsOnBeforeUnload);